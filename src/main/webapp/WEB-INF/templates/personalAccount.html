<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Notifications</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <link rel="stylesheet" th:href="@{/css/cascade.css}" type="text/css"/>
</head>
<body>
<header class="account-header">
    <div>
        <a th:href="@{/account/}"><h2>Личный кабинет</h2></a>
    </div>
    <div class="account-personal-data">
        <div>
            <p th:text="${user.firstName}+' '+${user.lastName}"></p>
        </div>
        <div>
            <form method="get" th:action="@{/logout/}">
                <button type="submit">Выйти</button>
            </form>
        </div>
    </div>
    <div class="account-organization-name">
        <p th:text="${user.organization.name}"></p>
    </div>
</header>
<main class="account-main">
    <section class="account-filter">
        <form class="account-filter-form">
            <ul>
                <li>
                    <label class="account-filter-form-label" for="checkbox1">
                        Новое
                        <input class="account-filter-form-checkbox" id="checkbox1" name="filterNew" type="checkbox"
                               value="true">
                    </label>
                </li>
                <li>
                    <label class="account-filter-form-label" for="checkbox2">
                        В обработке
                        <input class="account-filter-form-checkbox" id="checkbox2" name="filterInProcessing"
                               type="checkbox" value="true">
                    </label>
                </li>
                <li>
                    <label class="account-filter-form-label" for="checkbox3">
                        Отклонено
                        <input class="account-filter-form-checkbox" id="checkbox3" name="filterRejected" type="checkbox"
                               value="true">
                    </label>
                </li>
                <li>
                    <label class="account-filter-form-label" for="checkbox4">
                        Одобрено
                        <input class="account-filter-form-checkbox" id="checkbox4" name="filterApproved" type="checkbox"
                               value="true">
                    </label>
                </li>
                <li>
                    <label for="select1"> Истекает срок предоставления ответа
                        <select id="select1" name="timeFilter">
                            <option value="">Выбрать фильтр</option>
                            <option value="3_days">3 дня</option>
                            <option value="10_days">10 дней</option>
                            <option value="30_days">30 дней</option>
                        </select>
                    </label>
                </li>
                <li>
                    <label class="account-filter-form-label" for="submit1">
                        Применить фильтр
                        <input class="account-filter-form-submit" id="submit1" name="applyFilters" type="submit"
                               value="true">
                    </label>
                </li>
                <li>
                    <label class="account-filter-form-label" for="submit2">
                        Очистить фильтр
                        <input class="account-filter-form-submit" id="submit2" type="submit">
                    </label>
                </li>
            </ul>
        </form>
    </section>
    <section class="account-main-notifications">
        <table class="account-main-notifications-table">
            <tr>
                <th>№</th>
                <th>Вид уведомления</th>
                <th>Заказчик</th>
                <th>Статус обработки уведомления</th>
                <th>Дата получения уведомления</th>
                <th>Срок предоставления ответа</th>
                <th>Номер письма</th>
                <th>Совершить действие</th>
                <th>Журнал действий</th>
                <th>Удалить</th>
            </tr>
            <tr th:each="notification : ${stateOfPage.page}">
                <td th:text="${notification.id}">id</td>
                <td th:text="${notification.notificationType}">notification_type</td>
                <td th:text="${notification.organization.name}">org_name</td>
                <td th:text="${notification.status}">notification_status</td>
                <td th:text="${#dates.format(notification.dateReceived, 'yyyy-MM-dd')}"></td>
                <td th:text="${#dates.format(notification.dateResponse, 'yyyy-MM-dd')}"></td>
                <td th:text="${notification.letterNumber}">letter_number</td>
                <td>
                    <form method="post" th:action="@{/account/notification_info/}">
                        <label for="hidden1">
                            <input id="hidden1" name="id" th:value="${notification.id}" type="hidden"/>
                        </label>
                        <label for="submit3">
                            <input id="submit3" type="submit" value="Работа с уведомлением"/>
                        </label>
                    </form>
                </td>
                <td>
                    <form method="post" th:action="@{/account/notification_actions_history/}">
                        <label for="hidden2">
                            <input id="hidden2" name="id" th:value="${notification.id}" type="hidden"/>
                        </label>
                        <label for="submit4">
                            <input id="submit4" type="submit" value="Журнал действий"/>
                        </label>
                    </form>
                </td>
                <td>
                    <form method="post" th:action="@{/account/delete/}">
                        <label for="hidden3">
                            <input id="hidden3" name="id" th:value="${notification.id}" type="hidden">
                        </label>
                        <label for="delete_form">
                            <input id="delete_form" type="submit" value="Удалить"/>
                        </label>
                    </form>
                </td>
            </tr>
        </table>
        <section class="account-main-manager">
            <div class="account-main-manager-total_elements">
                <p>Найдено записей: <span th:text="${stateOfPage.page.totalElements}"></span></p>
            </div>
            <div>
                <nav aria-label="Pagination" class="account-main-notifications-manager-pagination"
                     th:if="${stateOfPage.page.totalPages gt 0}">
                    <ul class="pagination justify-content-center font-weight-bold">
                        <li class="page-item" th:classappend="${stateOfPage.page.number eq 0} ? 'disabled'">
                            <a aria-label="Previous"
                               class="page-link"
                               data-toggle="tooltip"
                               th:href="@{/account/?page={id}(id=${stateOfPage.page.number lt 2 ? 1 : stateOfPage.page.number})}"
                               title="Previous Page">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item" th:classappend="${i eq stateOfPage.page.number + 1} ? 'active'"
                            th:each="i : ${#numbers.sequence( 1, stateOfPage.page.totalPages, 1)}">
                            <a class="page-link" data-toggle="tooltip" th:href="@{/account/?page={id}(id=${i})}"
                               th:text="${i}" th:title="${'Page '+ i}"></a>
                        </li>
                        <li class="page-item"
                            th:classappend="${stateOfPage.page.number + 1 eq stateOfPage.page.totalPages} ? 'disabled'">
                            <a aria-label="Next"
                               class="page-link"
                               data-toggle="tooltip" th:href="@{/account/?page={id}(id=${stateOfPage.page.number + 2})}"
                               title="Next Page">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                    </ul>
                </nav>
            </div>
            <div class="account-main-notifications-manager-add_notification">
                <a th:href="@{/account/addNotification/}">Добавить уведомление</a>
            </div>
        </section>
</main>
<!--<script th:src="@{/js/personalAccount.js}">-->
</body>
</html>