<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Notifications</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
    <link rel="stylesheet" th:href="@{/css/cascade.css}" type="text/css"/>
    <style type="text/css">
        header {
            background: darkgoldenrod;
            display: flex;
            height: 120px;
            min-width: 120px;
            color: #fff;
            text-shadow: #000 0 0 .2em;
            opacity: 0.8;
        }

        .page-header h2 {
            font: bold calc(1em + 2 * (100vw - 120px) / 100) 'Dancing Script', cursive,
            fantasy;
            margin: 2%;
            text-decoration-color: black;
        }

        .page-header p {
            float: right
        }
    </style>
</head>
<body>
<header class="page-header">
    <h2>Личный кабинет</h2>
    <p th:text="${user.firstName}+' '+${user.lastName}"></p>
</header>
<table>
    <tr>
        <th>№</th>
        <th>Вид уведомления</th>
        <th>Заказчик</th>
        <th>Статус обработки уведомления</th>
        <th>Дата получения уведомления</th>
        <th>Срок предоставления ответа</th>
        <th>Номер письма</th>
        <th>Совершить действие</th>
        <th>Журнал действий</th>
        <th>Удалить</th>
    </tr>
    <tr th:each="notification : ${notifications}">
        <td th:text="${notification.id}">id</td>
        <td th:text="${notification.notificationType}">notification_type</td>
        <td th:text="${notification.organization.name}">org_name</td>
        <td th:text="${notification.status}">notification_status</td>
        <td th:text="${#dates.format(notification.dateReceived, 'yyyy-MM-dd')}"></td>
        <td th:text="${#dates.format(notification.dateResponse, 'yyyy-MM-dd')}"></td>
        <td th:text="${notification.letterNumber}">letter_number</td>
        <td>
            <form method="post" th:action="@{/account/commit_action/}">
                <input name="id" th:value="${notification.id}" type="hidden"/>
                <label for="actions_form"/>
                <input id="actions_form" type="submit" value="Работа с уведомлением"/>
            </form>
        </td>
        <td>
            <form method="get" th:action="@{/account/actions_history/}">
                <input name="id" th:value="${notification.id}" type="hidden"/>
                <label for="view_form"/>
                <input id="view_form" type="submit" value="view"/>
            </form>
        </td>
        <td>
            <form method="post" th:action="@{/account/delete/}">
                <input name="id" th:value="${notification.id}" type="hidden">
                <label for="delete_form"/>
                <input id="delete_form" type="submit" value="delete"/>
            </form>
        </td>
    </tr>
</table>
<div class="pagination">
    <nav aria-label="Pagination" th:if="${notifications.totalPages gt 0}">
        <ul class="pagination justify-content-center font-weight-bold">
            <li class="page-item" th:classappend="${notifications.number eq 0} ? 'disabled'">
                <a aria-label="Previous"
                   class="page-link"
                   data-toggle="tooltip"
                   th:href="@{/account/?page={id}(id=${notifications.number lt 2 ? 1 : notifications.number})}"
                   title="Previous Page">
                    <span aria-hidden="true">&laquo;</span>
                </a>
            </li>
            <li class="page-item" th:classappend="${i eq notifications.number + 1} ? 'active'"
                th:each="i : ${#numbers.sequence( 1, notifications.totalPages, 1)}">
                <a class="page-link" data-toggle="tooltip" th:href="@{/account/?page={id}(id=${i})}"
                   th:text="${i}" th:title="${'Page '+ i}"></a>
            </li>
            <li class="page-item" th:classappend="${notifications.number + 1 eq notifications.totalPages} ? 'disabled'">
                <a aria-label="Next"
                   class="page-link"
                   data-toggle="tooltip" th:href="@{/account/?page={id}(id=${notifications.number + 2})}"
                   title="Next Page">
                    <span aria-hidden="true">&raquo;</span>
                </a>
            </li>
        </ul>
    </nav>
</div>
<br>
<br>
<div class="link">
    <form method="get" th:action="@{/account/addNotification/}">
        <button type="submit">Новое уведомление</button>
    </form>
</div>
<br>
<div>
    <form method="get" th:action="@{/logout/}">
        <button type="submit">Выйти</button>
    </form>
</div>
</body>
</html>